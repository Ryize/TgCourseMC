"""
–ú–æ–¥—É–ª—å —Å –ª–æ–≥–∏–∫–æ–π —Ä–∞–±–æ—Ç—ã –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∞.
"""

from config import bot
from keyboard_mixin import KeyboardMixin
from models import User

TG_ID_ADMIN = 814401631

kb = KeyboardMixin()


def admin_actions(message, user):
    """
    –í —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç –∑–¥–æ—Ä–æ–≤–∞–µ—Ç—Å—è —Å –∞–¥–º–∏–Ω–æ–º –∏ –∫–∏–¥–∞–µ—Ç –µ–º—É
    –∞–¥–º–∏–Ω–æ–≤—Å–∫—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É.
    """

    bot.send_message(
        message.chat.id,
        f'–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, {user.name}!', reply_markup=kb.admin_kb()
    )


@bot.message_handler(
    func=lambda message: message.text == '–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–º üì£')
def message_admin(message):
    """
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

    –ö–æ–≥–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç–µ–∫—Å—Ç–æ–º "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
    –≤—Å–µ–º üì£",
    –±–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
    –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.

    Args:
        message (telebot.types.Message):
        –°–æ–æ–±—â–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.
    """
    bot.send_message(TG_ID_ADMIN, '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç: ')
    bot.register_next_step_handler(message, send_message_to_all_users)


def send_message_to_all_users(message):
    """
    –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.

    –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç
    —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

    Args:
        message (telebot.types.Message): –°–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç–µ–∫—Å—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ
        –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.
    """
    user = User.select()
    for i in user:
        if i.chat_id == TG_ID_ADMIN:
            pass
        else:
            bot.send_message(i.chat_id, f'–ê–¥–º–∏–Ω–∏–Ω—Å—Ç—Ä–∞—Ç–æ—Ä: {message.text}')
